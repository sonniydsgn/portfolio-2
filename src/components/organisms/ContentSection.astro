---
import Section from '@/components/atoms/Section.astro'
import slugify from '@/scripts/libs/slugify'

interface Props {
	title: string
	icon: string
}

const { title, icon = '◌' } = Astro.props

const slug = slugify(title)

// todo: добавить кастомный отступ после шапки
// todo: подумать над тем как добавлять аватарки с тултипами
---

<Section class="content-section" id={slug}>
	<header class="content-section__header">
		<span class="text-h2 content-section__icon">{icon}</span>
		<h2 class="text-h2 content-section__title">{title}</h2>
		<slot name="header" />
	</header>
	<div class="content-section__body">
		<slot />
	</div>
</Section>

<style>
	.content-section {
		display: flex;
		flex-direction: column;
		gap: 48px;
		border: 1px solid var(--border-secondary);
		border-radius: var(--br-lg);
		background-color: var(--bg-primary);
		padding-block-end: 48px;
	}

	.content-section__header {
		display: flex;
		border-bottom: 1px solid var(--border-secondary);
		padding-inline: 24px;
		padding-block-start: 16px;
		padding-block-end: 12px;
	}

	.content-section__icon {
		margin-inline-end: 8px;
	}

	.content-section__title {
		margin-inline-end: auto;
	}

	.content-section__body {
		display: flex;
		flex-direction: column;
		padding-inline: 24px;
	}
</style>

<style is:global>
	.content-section {
		hr {
			margin: 0;
			border: 1px solid var(--border-secondary);
		}

		ul {
			display: flex;
			flex-direction: column;
			gap: 8px;
			padding-inline-start: 32px;
		}

		h3 {
			margin-block-end: 16px;
		}

		a {
			color: var(--text-secondary-0);
			line-height: var(--lh-sm);
			text-decoration: underline;
			text-decoration-color: var(--border-primary);
			text-underline-offset: 0.15em;

			@media (hover) {
				&:hover {
					transition:
						text-decoration-color var(--tr-primary),
						color var(--tr-primary);
					color: var(--text-primary-0);
					text-decoration-color: transparent;
				}
			}
		}

		figure + p {
			margin-block-start: 24px;
		}

		p {
			max-width: 790px;
		}

		p + p {
			margin-block-start: 12px;
		}

		p + figure {
			margin-block-start: 16px;
		}

		* ~ h3 {
			margin-block-start: 40px;
		}
	}
</style>
